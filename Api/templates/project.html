<!DOCTYPE html>
<html>
    <head>
        <title>API自动化测试用例</title>
        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        {% set pro_name = tasks['pro_name'] %}
        {% set nginx_api_proxy = tasks['nginx_api_proxy'] %}
        {% set test_case_list = tasks['test_case_list'] %}
        {% set is_run = tasks['is_run'] %}
        {% set current_report_url = tasks['current_report_url'] %}
        {% set history_report_path = tasks['history_report_path'] %}
        <link href="/{{nginx_api_proxy}}/static/css/bootstrap.min.css" rel="stylesheet">
        <link href="/{{nginx_api_proxy}}/static/css/sweetalert.min.css" rel="stylesheet"/>
        <link href="/{{nginx_api_proxy}}/static/css/font-awesome.css" rel="stylesheet"/>
        <link href="/{{nginx_api_proxy}}/static/css/dataTables.bootstrap.css" rel="stylesheet"/>
    </head>

    <body>
        <div id="page-wrapper">
            <div class="header" align="center">
                <h1 class="page-header"> API&nbsp;自&nbsp;动&nbsp;化&nbsp;测&nbsp;试&nbsp;用&nbsp;例&nbsp;-&nbsp;{{pro_name}}&nbsp;项&nbsp;目 </h1>
            </div>
            <div id="page-inner">
               <div class="row">
                  <div class="col-lg-12">

                      <div class="col-xs-12 col-md-7" style="margin-left:5%">
                          <div class="panel panel-default">
                             <div class="panel-heading" align="center" style="font-size:15px; color: #B8860B; font-weight: bold;">
                                 导&nbsp;&nbsp;&nbsp;入&nbsp;&nbsp;&nbsp;用&nbsp;&nbsp;&nbsp;例&nbsp;&nbsp;&nbsp;操&nbsp;&nbsp;&nbsp;作
                             </div>
                             <div class="panel-body">
                                 <form id="import_action_form" class="form-horizontal" enctype="multipart/form-data">
                                    <div class="col-sm-12">
                                        <div class="col-sm-4">
                                            <label style="color: #B8860B; font-weight: bold;">选 择 用 例 文 件（.xls .xlsx .csv）</label>
                                            <input class="form-control" id="file" type="file" name="file"/>
                                        </div>
                                        <div class="col-sm-3" style="margin-left:5%;">
                                            <label style="color: #B8860B; font-weight: bold;">选 择 导 入 方 式</label>
                                            <select class="form-control" name="import_method" id="import_method" style="text-align: center; text-align-last: center;">
                                                <option value="">请 选 择</option>
                                                <option value="batch_insert">批 量 新 增</option>
                                                <option value="all_replace">全 部 替 换</option>
                                                <option value="batch_insert_and_replace">批 量 新 增 + 替 换</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-3" align="center" style="line-height:70px;">
                                            <a style="margin-left:10%" href="/api_case_tmpl" download="测试用例模板.xlsx"
                                                onMouseOver="this.style.cursor='hand',this.style.color='#FF0000'"
                                                onMouseOut="this.style.color='#006699'"> 点击下载 测 试 用 例 模 板
                                            </a>
                                        </div>
                                        {# 新增 按钮 #}
                                        <div class="col-sm-1" align="center" style="line-height:65px;">
                                            <span class="input-group">
                                                <button class="btn btn-primary btn-icon" type="button" data-toggle="modal" data-target="#add_case_form"><i class="fa fa-plus-circle fa-2x"></i></button>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="col-sm-10">
                                        {% if is_run %}
                                            <div class="col-sm-3" align="center" style="line-height:45px;">
                                                <button id="import_btn" name="import_btn" type="button" class="btn btn-primary" disabled="disabled"
                                                        data-loading-text="Importing..." onclick="exec_import('{{ pro_name }}','{{ nginx_api_proxy }}')"> 执 行 导 入
                                                </button>
                                            </div>
                                            <div class="col-sm-3" align="center" style="line-height:45px; font-size:15px;">
                                                <span id="exec_result" style="font-size:15px" class="label label-warning">当前项目正在运行中</span>
                                            </div>
                                        {% else %}
                                            <div class="col-sm-3" align="center" style="line-height:45px;">
                                                <button id="import_btn" name="import_btn" type="button" class="btn btn-primary"
                                                        data-loading-text="Importing..." onclick="exec_import('{{ pro_name }}','{{ nginx_api_proxy }}')"> 执 行 导 入
                                                </button>
                                            </div>
                                            <div class="col-sm-8" align="center" style="line-height:45px; font-size:15px;">
                                                <span id="exec_result" style="font-size:15px" class="label label-info"></span>
                                            </div>
                                        {% endif %}
                                    </div>
                                 </form>

                             </div>
                          </div>
                      </div>

                      <div class="col-xs-12 col-md-3" style="margin-left:2%">
                          <div class="panel panel-default">
                             <div class="panel-heading" align="center" style="font-size:15px; color: #B8860B; font-weight: bold;">
                                 查 &nbsp;&nbsp;&nbsp; 看 &nbsp;&nbsp;&nbsp; 报 &nbsp;&nbsp;&nbsp; 告
                             </div>
                             <div class="panel-body">
                                 <div class="col-sm-12" style="margin-top:3%">
                                     <div class="col-sm-4" style="margin-left:10%; line-height:30px; font-size:15px;">
                                         <a id="current_report_url" onclick="window.open('{{current_report_url}}')"
                                                onMouseOver="this.style.cursor='hand',this.style.color='#FF0000'"
                                                onMouseOut="this.style.color='#006699'"> 最 新 报 告
                                         </a>
                                     </div>
                                     <div class="col-sm-4" style="margin-left:15%; line-height:30px; font-size:15px;">
                                         <a id="history_report_url" onclick="window.open('{{history_report_path}}')"
                                                onMouseOver="this.style.cursor='hand',this.style.color='#FF0000'"
                                                onMouseOut="this.style.color='#006699'"> 历 史 报 告
                                         </a>
                                     </div>
                                 </div>
                                 <div class="col-sm-12" style="margin-top:3%">
                                     {% if is_run %}
                                         <div class="col-sm-3" align="center" style="margin-left:6%; line-height:60px; font-size:15px;">
                                             <button id="test_btn" name="test_btn" type="button" class="btn btn-primary"  disabled="disabled"
                                                    onclick="generate_report('{{ pro_name }}','{{ nginx_api_proxy }}')"> 生 成 最 新 报 告
                                             </button>
                                         </div>
                                         <div class="col-sm-5" align="center" style="margin-left:23%; line-height:60px; font-size:15px;">
                                             <span id="generate_result" style="font-size:15px" class="label label-warning">当前项目正在运行中</span>
                                         </div>
                                     {% else %}
                                         <div class="col-sm-3" align="center" style="margin-left:6%; line-height:60px; font-size:15px;">
                                             <button id="test_btn" name="test_btn" type="button" class="btn btn-primary"
                                                    onclick="generate_report('{{ pro_name }}','{{ nginx_api_proxy }}')"> 生 成 最 新 报 告
                                             </button>
                                         </div>
                                         <div class="col-sm-5" align="center" style="margin-left:23%; line-height:60px; font-size:15px;">
                                             <span id="generate_result" style="font-size:15px" class="label label-info"></span>
                                         </div>
                                     {% endif %}
                                 </div>
                             </div>
                          </div>
                      </div>

                  </div>
               </div>
            </div>

            <div id="page-inner2">
               <div class="row">
                  <div class="col-lg-12">
                     <div class="col-xs-12 col-md-11" style="margin-left:3%">
                        <div class="panel panel-default">
                            <div class="panel-heading" align="center" style="font-size:15px; color: #B8860B; font-weight: bold;">
                                API&nbsp;&nbsp;&nbsp;接&nbsp;&nbsp;&nbsp;口&nbsp;&nbsp;&nbsp;查&nbsp;&nbsp;&nbsp;询
                             </div>
                            <div class="panel-body">
                                <div class="card">
                                    <div class="card-body card-padding">
                                        <div class="row" role="form">
                                            <div class="col-sm-2">
                                                <div class="fg-line">
                                                    <input id="interface_name" name="interface_name" type="text" class="form-control" placeholder="接口名称">
                                                </div>
                                            </div>
                                            <div class="col-sm-2">
                                                <div class="input-group">
                                                    <span class="input-group-addon">请求方式：</span>
                                                    <div class="fg-line">
                                                        <select class="form-control" id="request_method" name="request_method" style="text-align: center; text-align-last: center;">
                                                            <option value="">全部</option>
                                                            <option value="GET">GET</option>
                                                            <option value="POST">POST</option>
                                                            <option value="PUT">PUT</option>
                                                            <option value="DELETE">DELETE</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-2">
                                                <div class="input-group">
                                                    <span class="input-group-addon">用例状态：</span>
                                                    <div class="fg-line">
                                                        <select class="form-control" id="case_status" name="case_status" style="text-align: center; text-align-last: center;">
                                                            <option value="">全部</option>
                                                            <option value="True">上线</option>
                                                            <option value="False">下线</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            {# 搜索 按钮 #}
                                            <div class="col-sm-1" align="center">
                                                <div class="input-group" id="search_btn">
                                                    <button class="btn btn-primary btn-icon" onclick="search_case('{{ pro_name }}','{{ nginx_api_proxy }}')"><i class="fa fa-search"></i></button>
                                                </div>
                                            </div>
                                            {# 选择 host #}
                                            <div class="col-sm-2" style="margin-left:20px">
                                                <div class="input-group">
                                                    <span class="input-group-addon">选择HOST：</span>
                                                    <div class="fg-line">
                                                        <select class="form-control" id="host" name="host" style="text-align: center; text-align-last: center;">
                                                            <option value=""></option>
                                                            <option value="local">local</option>
                                                            <option value="docker">docker</option>
                                                            <option value="1111">1111</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            {# 批量上下线 #}
                                            {% if is_run %}
                                                <div class="col-sm-1" align="center" style="margin-left:60px">
                                                     <button id="on_line_all" type="button" class="btn btn-success" disabled="disabled"
                                                            onclick="update_case_status_all('{{pro_name}}','true','{{nginx_api_proxy}}')"> 批 量 上 线 </button>
                                                </div>
                                                <div class="col-sm-1" align="center" >
                                                     <button id="off_line_all" type="button" class="btn btn-danger" disabled="disabled"
                                                            onclick="update_case_status_all('{{pro_name}}','false','{{nginx_api_proxy}}')"> 批 量 下 线 </button>
                                                </div>
                                            {% else %}
                                                <div class="col-sm-1" align="center" style="margin-left:60px">
                                                     <button id="on_line_all" type="button" class="btn btn-success"
                                                            onclick="update_case_status_all('{{pro_name}}','true','{{nginx_api_proxy}}')"> 批 量 上 线 </button>
                                                </div>
                                                <div class="col-sm-1" align="center" >
                                                     <button id="off_line_all" type="button" class="btn btn-danger"
                                                            onclick="update_case_status_all('{{pro_name}}','false','{{nginx_api_proxy}}')"> 批 量 下 线 </button>
                                                </div>
                                            {% endif %}


                                        </div>

                                        <div class="row" role="form" style="margin-top:10px">
                                            <div class="col-sm-2">
                                                <div class="fg-line">
                                                    <input id="interface_url" name="interface_url" type="text" class="form-control" placeholder="接口地址">
                                                </div>
                                            </div>
                                            <div class="col-sm-2">
                                                <div class="input-group">
                                                    <span class="input-group-addon">用例类型：</span>
                                                    <div class="fg-line">
                                                        <select class="form-control" id="is_depend" name="is_depend" style="text-align: center; text-align-last: center;">
                                                            <option value="">全部</option>
                                                            <option value="True">依赖</option>
                                                            <option value="False">测试</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-2">
                                                <div class="input-group">
                                                    <span class="input-group-addon">测试结果：</span>
                                                    <div class="fg-line">
                                                        <select class="form-control" id="test_result" name="test_result" style="text-align: center; text-align-last: center;">
                                                            <option value="">全部</option>
                                                            <option value="success">成功</option>
                                                            <option value="fail">失败</option>
                                                            <option value="error">错误</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            {# 搜索 条数 #}
                                            <div class="col-sm-1" align="center" style="color:#5B00AE; line-height:35px; font-size:15px;" id="search_case_num">共 {{ tasks['case_num'] }} 条</div>
                                            {# 测试 按钮 #} {# 执行 结果 #}
                                            {% if is_run %}
                                                <div class="col-sm-1" align="center" style="margin-left:20px">
                                                    <button id="test_btn" name="test_btn" type="button" class="btn btn-primary" disabled="disabled"
                                                            data-loading-text="Running..." onclick="exec_test('{{ pro_name }}','{{ nginx_api_proxy }}')"> 执行测试
                                                    </button>
                                                </div>
                                                <div class="col-sm-1" align="center" style="line-height:35px; font-size:15px;"><span id="result_info" class="label label-warning">当前项目正在运行中</span></div>
                                            {% else %}
                                                <div class="col-sm-1" align="center" style="margin-left:20px">
                                                    <button id="test_btn" name="test_btn" type="button" class="btn btn-primary"
                                                            data-loading-text="Running..." onclick="exec_test('{{ pro_name }}','{{ nginx_api_proxy }}')"> 执行测试
                                                    </button>
                                                </div>
                                                <div class="col-sm-1" align="center" style="line-height:35px; font-size:15px;"><span id="result_info" class="label label-info"></span></div>
                                            {% endif %}

                                            {# 终止运行状态 #}
                                            <div class="col-sm-1" align="center" style="margin-left:60px">
                                                <button id="stop_status_btn" type="button" class="btn btn-primary" onclick="stop_status('{{ pro_name }}','{{ nginx_api_proxy }}')"> 停止运行状态
                                                </button>
                                            </div>
                                            {# 停止 结果 #}
                                            <div class="col-sm-1" align="center" style="line-height:35px; font-size:15px;"><span id="stop_info"></span></div>

                                        </div>

                                        <div class="table-responsive" style="margin-top: 1%">
                                            <table class="table table-striped">
                                                <thead>
                                                <tr>
                                                    <th>接口名称</th>
                                                    <th class="text-center">请求方式</th>
                                                    <th>接口地址</th>
                                                    <th>验证关键字段</th>
                                                    <th class="text-center">验证模式</th>
                                                    <th class="text-center">用例状态</th>
                                                    <th class="text-center">测试结果</th>
                                                    <th class="text-center">上次测试时间</th>
                                                    <th class="text-center">操作</th>
                                                </tr>
                                                </thead>
                                                <tbody id="case_tbody">
                                                {% for test_case in test_case_list %}
                                                    {% set _id = test_case["_id"] %}
                                                    {% set interface_name = test_case["interface_name"] %}
                                                    {% set request_method = test_case["request_method"] %}
                                                    {% set request_header = test_case["request_header"] %}
                                                    {% set interface_url = test_case["interface_url"] %}
                                                    {% set request_params = test_case["request_params"] %}
                                                    {% set compare_core_field_name_list = test_case["compare_core_field_name_list"] %}
                                                    {% set expect_core_field_value_list = test_case["expect_core_field_value_list"] %}
                                                    {% set expect_field_name_list = test_case["expect_field_name_list"] %}
                                                    {% set verify_mode = test_case["verify_mode"] %}
                                                    {% set is_depend = test_case["is_depend"] %}
                                                    {% set depend_level = test_case["depend_level"] %}
                                                    {% set depend_field_name_list = test_case["depend_field_name_list"] %}
                                                    {% set depend_field_value_list = test_case["depend_field_value_list"] %}
                                                    {% set actual_core_field_value_list = test_case["actual_core_field_value_list"] %}
                                                    {% set actual_field_name_list = test_case["actual_field_name_list"] %}
                                                    {% set case_status = test_case["case_status"] %}
                                                    {% set exec_time = test_case["exec_time"] %}
                                                    {% set test_result = test_case["test_result"] %}
                                                    <tr>
                                                        {# 接口名称（测试信息） #}
                                                        {% if is_depend %}
                                                            <td style="width: 150px; display:table-cell; vertical-align:middle;" onclick="show_response_info('{{ pro_name }}','{{ nginx_api_proxy }}', '{{ _id }}')" data-toggle="modal" data-target="#show_depend_response_info">{{ interface_name }} <font color="#DC143C">(依赖)</font></td>
                                                        {% else %}
                                                            <td style="width: 150px; display:table-cell; vertical-align:middle;" onclick="show_response_info('{{ pro_name }}','{{ nginx_api_proxy }}', '{{ _id }}')" data-toggle="modal" data-target="#show_test_response_info">{{ interface_name }}</td>
                                                        {% endif %}

                                                        {# 请求方式（请求头文件）#}
                                                        <td class="text-center" style="width: 100px; display:table-cell; vertical-align:middle;" data-toggle="popover" data-trigger="hover" data-placement="bottom" data-container="body" title="请求头文件" data-content="{{ request_header }}">{{ request_method }}</td>
                                                        {# 接口地址（请求参数）#}
                                                        <td style="width: 200px; display:table-cell; vertical-align:middle;" data-toggle="popover" data-trigger="hover" data-placement="bottom" data-container="body" title="请求参数" data-content="{{ request_params }}">{{ interface_url }}</td>

                                                        {% if is_depend %}
                                                            {# 依赖字段值（依赖的字段名列表、依赖的字段值列表）#}
                                                            <td style="width: 150px; display:table-cell; vertical-align:middle;" data-toggle="popover" data-trigger="hover" data-placement="bottom" data-container="body" title="字段名：{{ depend_field_name_list }}" data-content="字段值：{{ depend_field_value_list }}"><span style="font-size:14px" class="label label-info">依 赖 字 段 值</span></td>
                                                            {# 依赖等级 #}
                                                            <td class="text-center" style="width: 100px; display:table-cell; vertical-align:middle;">依赖等级：{{ depend_level }}</td>
                                                        {% else %}
                                                            {# 验证关键字段（期望的关键字段值）#}
                                                            <td style="width: 150px; display:table-cell; vertical-align:middle;" data-toggle="popover" data-trigger="hover" data-placement="bottom" data-container="body" title="期望的关键字段值" data-content="{{ expect_core_field_value_list }}">{{ compare_core_field_name_list }}</td>
                                                            {# 验证模式（期望的响应字段列表）#}
                                                            <td class="text-center" style="width: 100px; display:table-cell; vertical-align:middle;">
                                                                {% if verify_mode == 1 %} 仅关键字段 {% else %} 关键字段+响应字段列表 {% endif %}
                                                            </td>
                                                        {% endif %}

                                                        {# 用例状态 #}
                                                        <td class="text-center" style="width: 100px; display:table-cell; vertical-align:middle;" onclick="update_case_status('{{pro_name}}','{{nginx_api_proxy}}','{{_id}}')" id="case_status_{{_id}}">
                                                        {% if case_status %}
                                                            <font color="#00A600">上线</font>
                                                        {% else %}
                                                            <font color="#DC143C">下线</font>
                                                        {% endif %}
                                                        </td>

                                                        {# 测试结果（测试结果信息）#}
                                                        <td class="text-center" style="width: 100px; display:table-cell; vertical-align:middle;" data-toggle="popover" data-trigger="hover" data-placement="bottom" data-container="body" title="测试结果信息" data-content="{{ test_result }}">
                                                            {% if is_depend %}
                                                                {% if "success" in test_result %}
                                                                    <font color="#00A600"> 依赖成功 </font>
                                                                {% elif "fail" in test_result %}
                                                                    <font color="#DC143C"> 依赖失败 </font>
                                                                {% elif "error" in test_result %}
                                                                    <font color="#C6A300"> 配置错误 </font>
                                                                {% else %}
                                                                {% endif %}
                                                            {% else %}
                                                                {% if "依赖" in test_result%}
                                                                    <span id="exec_result" style="font-size:14px" class="label label-warning"> 依赖错误 </span>
                                                                {% elif "success" in test_result %}
                                                                    <span id="exec_result" style="font-size:14px" class="label label-success"> 测试成功 </span>
                                                                {% elif "fail" in test_result %}
                                                                    <span id="exec_result" style="font-size:14px" class="label label-danger"> 测试失败 </span>
                                                                {% elif "error" in test_result %}
                                                                    <span id="exec_result" style="font-size:14px" class="label label-warning"> 配置错误 </span>
                                                                {% else %}
                                                                    <span id="exec_result" style="font-size:14px" class="label label-info"></span>
                                                                {% endif %}
                                                            {% endif %}
                                                        </td>

                                                        {# 上次执行时间 #}
                                                        <td class="text-center" style="width: 150px; display:table-cell; vertical-align:middle;">{{ exec_time }}</td>

                                                        {# 操作 #}
                                                        <td class="text-center" style="width: 100px; display:table-cell; vertical-align:middle;">
                                                            {% if is_run %}
                                                                <button class="btn btn-default" type="button" onclick="fill_edit_frame('{{ pro_name }}','{{ nginx_api_proxy }}', '{{ _id }}')" data-toggle="modal" data-target="#edit_case_form" disabled="disabled"><i class="fa fa-edit" style="color: #6A5ACD"></i></button>
                                                                <button class="btn btn-default" type="button" onclick="del_case('{{ pro_name }}','{{ nginx_api_proxy }}', '{{ _id }}')" disabled="disabled"><i class="fa fa-trash-o fa-lg" style="color: #ff0000"></i></button>
                                                            {% else %}
                                                                <button class="btn btn-default" type="button" onclick="fill_edit_frame('{{ pro_name }}','{{ nginx_api_proxy }}', '{{ _id }}')" data-toggle="modal" data-target="#edit_case_form"><i class="fa fa-edit" style="color: #6A5ACD"></i></button>
                                                                <button class="btn btn-default" type="button" onclick="del_case('{{ pro_name }}','{{ nginx_api_proxy }}', '{{ _id }}')"><i class="fa fa-trash-o fa-lg" style="color: #ff0000"></i></button>
                                                            {% endif %}

                                                        </td>
                                                    </tr>
                                                {% endfor %}

                                                </tbody>

                                            </table>

                                        </div>

                                    </div>
                                </div>

                            </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
        </div>

        <div id='ending'>&nbsp;</div>
        <div style=" position:fixed;right:50px; bottom:30px; width:20px; height:20px;cursor:pointer">
            <a href="#"><span class="glyphicon glyphicon-eject" style = "font-size:30px;" aria-hidden="true"></span></a>
        </div>

        <!-- 新增窗口 -->
        <div id="add_case_form" class="modal fade" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">

                    <div class="modal-header">
                        <button class="close" data-dismiss="modal">
                            <span>&times;</span>
                        </button>
                        <div class="modal-title">
                            <h2 class="text-center">新增测试用例</h2>
                        </div>
                    </div>

                    <div class="modal-body">
                        <div class="form-group">
                            <label>接口名称：<font color="#DC143C">(必填)</font></label>
                            <input class="form-control" type="text" id="interface_name_add" placeholder="接口名称">
                        </div>
                        <div class="form-group">
                            <label>接口地址：<font color="#DC143C">(必填)</font></label>
                            <input class="form-control" type="text" id="interface_url_add" placeholder="接口地址">
                        </div>
                        <div class="form-group">
                            <label>请求方式：<font color="#DC143C">(必选)</font></label>
                            <div class="fg-line">
                                <select class="form-control" id="request_method_add">
                                    <option value=""></option>
                                    <option value="GET">GET</option>
                                    <option value="POST">POST</option>
                                    <option value="PUT">PUT</option>
                                    <option value="DELETE">DELETE</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>请求头文件：<font color="#B8860B">eg: &nbsp;{"Content-Type": "application/json"}</font></label>
                            <input class="form-control" type="text" id="request_header_add" placeholder="请求头文件">
                        </div>
                        <div class="form-group">
                            <label>请求参数：<font color="#B8860B">eg: &nbsp;?name=测试&token=30&nbsp;&nbsp;或&nbsp;&nbsp;{"name":"测试","age":30}</font></label>
                            <input class="form-control" type="text" id="request_params_add" placeholder="请求参数">
                        </div>
                        <div class="form-group">
                            <label>验证模式：<font color="#DC143C">(测试必选)</font></label>
                            <div class="fg-line">
                                <select class="form-control" id="verify_mode_add">
                                    <option value=""></option>
                                    <option value="1">仅验证关键字段</option>
                                    <option value="2">同时验证关键字段和验证响应参数列表</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>待比较关键字段名列表：<font color="#DC143C">(测试必填)&nbsp;&nbsp;</font><font color="#B8860B">eg：&nbsp;msg,code</font></label>
                            <input class="form-control" type="text" id="compare_core_field_name_list_add" placeholder="待比较关键字段名列表">
                        </div>
                        <div class="form-group">
                            <label>期望的关键字段值列表：<font color="#DC143C">(测试必填)&nbsp;&nbsp;</font><font color="#B8860B">eg：&nbsp;请求成功,301200</font></label>
                            <input class="form-control" type="text" id="expect_core_field_value_list_add" placeholder="期望的关键字段值列表">
                        </div>

                        <div class="form-group">
                            <label>期望的响应字段列表：</font><font color="#B8860B">eg: &nbsp;status,msg,code</font></label>
                            <input class="form-control" type="text" id="expect_field_name_list_add" placeholder="期望的响应字段列表">
                        </div>
                        <div class="form-group">
                            <label>是否为依赖接口：<font color="#DC143C">(必选)</font></label>
                            <div class="fg-line">
                                <select class="form-control" id="is_depend_add">
                                    <option value=""></option>
                                    <option value="False">否</option>
                                    <option value="True">是</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>依赖字段名列表：<font color="#DC143C">(依赖必填)&nbsp;&nbsp;</font></font><font color="#B8860B">eg: &nbsp;token,sms_code</font></label>
                            <input class="form-control" type="text" id="depend_field_name_list_add" placeholder="依赖字段名列表">
                        </div>
                        <div class="form-group">
                            <label>依赖等级：<font color="#DC143C">(依赖必选)</font></label>
                            <div class="fg-line">
                                <select class="form-control" id="depend_level_add">
                                    <option value=""></option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>用例状态：</label>
                            <div class="fg-line">
                                <select class="form-control" id="case_status_add">
                                    <option value="False">下线</option>
                                    <option value="True">上线</option>
                                </select>
                            </div>
                        </div>

                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span>关闭</button>
                        <button type="button" class="btn btn-primary" data-dismiss="modal" id="save" onclick="add_case('{{ pro_name }}','{{ nginx_api_proxy }}')"><span class="glyphicon glyphicon-floppy-disk"></span>保存</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 编辑窗口 -->
        <div id="edit_case_form" class="modal fade" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">

                    <div class="modal-header">
                        <button class="close" data-dismiss="modal">
                            <span>&times;</span>
                        </button>
                        <div class="modal-title">
                            <h2 class="text-center">编辑测试用例</h2>
                        </div>
                    </div>

                    <div class="modal-body">
                        <div class="form-group">
                            <label>ID：</label>
                            <label id="case_id_edit"></label>
                        </div>
                        <div class="form-group">
                            <label>接口名称：<font color="#DC143C">(必填)</font></label>
                            <input class="form-control" type="text" id="interface_name_edit" placeholder="接口名称">
                        </div>
                        <div class="form-group">
                            <label>接口地址：<font color="#DC143C">(必填)</font></label>
                            <input class="form-control" type="text" id="interface_url_edit" placeholder="接口地址">
                        </div>
                        <div class="form-group">
                            <label>请求方式：<font color="#DC143C">(必选)</font></label>
                            <div class="fg-line">
                                <select class="form-control" id="request_method_edit">
                                    <option value=""></option>
                                    <option value="GET">GET</option>
                                    <option value="POST">POST</option>
                                    <option value="PUT">PUT</option>
                                    <option value="DELETE">DELETE</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>请求头文件：<font color="#B8860B">eg: &nbsp;{"Content-Type": "application/json"}</font></label>
                            <input class="form-control" type="text" id="request_header_edit" placeholder="请求头文件">
                        </div>
                        <div class="form-group">
                            <label>请求参数：<font color="#B8860B">eg: &nbsp;?name=测试&age=30&nbsp;&nbsp;或&nbsp;&nbsp;{"name":"测试","age":30}</font></label>
                            <input class="form-control" type="text" id="request_params_edit" placeholder="请求参数">
                        </div>
                        <div class="form-group">
                            <label>验证模式：<font color="#DC143C">(测试必选)</font></label>
                            <div class="fg-line">
                                <select class="form-control" id="verify_mode_edit">
                                    <option value=""></option>
                                    <option value="1">仅验证关键字段</option>
                                    <option value="2">同时验证关键字段和验证响应参数列表</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>待比较关键字段名列表：<font color="#DC143C">(测试必填)&nbsp;&nbsp;</font><font color="#B8860B">eg：&nbsp;msg,code</font></label>
                            <input class="form-control" type="text" id="compare_core_field_name_list_edit" placeholder="待比较关键字段名列表">
                        </div>
                        <div class="form-group">
                            <label>期望的关键字段值列表：<font color="#DC143C">(测试必填)&nbsp;&nbsp;</font><font color="#B8860B">eg：&nbsp;请求成功,301200</font></label>
                            <input class="form-control" type="text" id="expect_core_field_value_list_edit" placeholder="期望的关键字段值列表">
                        </div>

                        <div class="form-group">
                            <label>期望的响应字段列表：</font><font color="#B8860B">eg: &nbsp;status,msg,code</font></label>
                            <input class="form-control" type="text" id="expect_field_name_list_edit" placeholder="期望的响应字段列表">
                        </div>
                        <div class="form-group">
                            <label style="color: #B8860B; font-weight: bold;">当 前 接 口 </label>
                            <label id="is_depend_edit" style="color: #DC143C; font-weight: bold;"></label>
                            <label style="color: #B8860B; font-weight: bold;"> 依 赖 接 口 </label>
                        </div>
                        <div class="form-group">
                            <label>依赖字段名列表：<font color="#DC143C">(依赖必填)&nbsp;&nbsp;</font></font><font color="#B8860B">eg: &nbsp;token,sms_code</font></label>
                            <input class="form-control" type="text" id="depend_field_name_list_edit" placeholder="依赖字段名列表">
                        </div>
                        <div class="form-group">
                            <label>依赖等级：<font color="#DC143C">(依赖必选)</font></label>
                            <div class="fg-line">
                                <select class="form-control" id="depend_level_edit">
                                    <option value=""></option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>用例状态：</label>
                            <div class="fg-line">
                                <select class="form-control" id="case_status_edit">
                                    <option value="False">下线</option>
                                    <option value="True">上线</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span>关闭</button>
                        <button type="button" class="btn btn-primary" data-dismiss="modal" id="edit" onclick="edit_case('{{ pro_name }}','{{ nginx_api_proxy }}')"><span class="glyphicon glyphicon-floppy-disk"></span>更新</button>
                    </div>
                </div>
            </div>
        </div>


        <!-- 显示测依赖口响应信息 -->
        <div id="show_depend_response_info" class="modal fade" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">

                    <div class="modal-header">
                        <button class="close" data-dismiss="modal">
                            <span>&times;</span>
                        </button>
                        <div class="modal-title">
                            <h2 class="text-center">依 赖 接 口 响 应 信 息</h2>
                        </div>
                    </div>

                    <div class="modal-body">
                        <div class="form-group">
                            <label>ID：</label>
                            <label id="case_id_show_depend"></label>
                        </div>
                        <div class="form-group">
                            <label>依赖接口：</label>
                            <label id="is_depend_show_depend"></label>
                        </div>
                        <div class="form-group">
                            <label>接口名称：</label>
                            <label id="interface_name_show_depend"></label>
                        </div>
                        <div class="form-group">
                            <label>接口地址：</label>
                            <label id="interface_url_show_depend"></label>
                        </div>
                        <div class="form-group">
                            <label>请求方式：</label>
                            <label id="request_method_show_depend"></label>
                        </div>
                        <div class="form-group">
                            <label>请求头文件：</label>
                            <label id="request_header_show_depend"></label>
                        </div>
                        <div class="form-group">
                            <label>请求参数：</label>
                            <label id="request_params_show_depend"></label>
                        </div>
                        <div class="form-group">
                            <label>用例状态：</label>
                            <label id="case_status_show_depend"></label>
                        </div>
                        <div class="form-group">
                            <label>运行状态：</label>
                            <label id="run_status_show_depend"></label>
                        </div>
                        <div class="form-group">
                            <label>响应信息：</label>
                            <label id="response_info_show_depend"></label>
                        </div>
                        <div class="form-group">
                            <label>依赖等级：</label>
                            <label id="depend_level_show_depend"></label>
                        </div>
                        <hr />
                        <div class="form-group">
                            <label><font color="#5B00AE">依赖字段名列表：</font></label>
                            <label id="depend_field_name_list_show_depend"></label>
                        </div>
                        <div class="form-group">
                            <label><font color="#5B00AE">依赖字段值列表：</font></label>
                            <label id="depend_field_value_list_show_depend"></label>
                        </div>
                        <hr />
                        <div class="form-group">
                            <label><font color="#5B00AE">测试结果：</font></label>
                            <label id="test_result_show_depend"></label>
                        </div>
                        <hr />
                        <div class="form-group">
                            <label>更新时间：</label>
                            <label id="update_time_show_depend"></label>
                        </div>
                        <div class="form-group">
                            <label>创建时间：</label>
                            <label id="create_time_show_depend"></label>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span>关闭</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 显示测试接口响应信息 -->
        <div id="show_test_response_info" class="modal fade" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">

                    <div class="modal-header">
                        <button class="close" data-dismiss="modal">
                            <span>&times;</span>
                        </button>
                        <div class="modal-title">
                            <h2 class="text-center">测 试 接 口 响 应 信 息</h2>
                        </div>
                    </div>

                    <div class="modal-body">
                        <div class="form-group">
                            <label>ID：</label>
                            <label id="case_id_show_test"></label>
                        </div>
                        <div class="form-group">
                            <label>依赖接口：</label>
                            <label id="is_depend_show_test"></label>
                        </div>
                        <div class="form-group">
                            <label>接口名称：</label>
                            <label id="interface_name_show_test"></label>
                        </div>
                        <div class="form-group">
                            <label>接口地址：</label>
                            <label id="interface_url_show_test"></label>
                        </div>
                        <div class="form-group">
                            <label>请求方式：</label>
                            <label id="request_method_show_test"></label>
                        </div>
                        <div class="form-group">
                            <label>请求头文件：</label>
                            <label id="request_header_show_test"></label>
                        </div>
                        <div class="form-group">
                            <label>请求参数：</label>
                            <label id="request_params_show_test"></label>
                        </div>
                        <div class="form-group">
                            <label>用例状态：</label>
                            <label id="case_status_show_test"></label>
                        </div>
                        <div class="form-group">
                            <label>运行状态：</label>
                            <label id="run_status_show_test"></label>
                        </div>
                        <div class="form-group">
                            <label>响应信息：</label>
                            <label id="response_info_show_test"></label>
                        </div>
                        <div class="form-group">
                            <label>验证模式：</label>
                            <label id="verify_mode_show_test"></label>
                        </div>
                        <hr />
                        <div class="form-group">
                            <label><font color="#5B00AE">待比较关键字段名列表：</font></label>
                            <label id="compare_core_field_name_list_show_test"></label>
                        </div>
                        <div class="form-group">
                            <label><font color="#5B00AE">期望的关键字段值列表：</font></label>
                            <label id="expect_core_field_value_list_show_test"></label>
                        </div>
                        <div class="form-group">
                            <label><font color="#5B00AE">实际的关键字段值列表：</font></label>
                            <label id="actual_core_field_value_list_show_test"></label>
                        </div>
                        <div class="form-group">
                            <label><font color="#5B00AE">关键字段值比较结果：</font></label>
                            <label id="result_core_field_value_show_test"></label>
                        </div>
                        <hr />
                        <div class="form-group">
                            <label><font color="#5B00AE">期望的响应字段列表：</font></label>
                            <label id="expect_field_name_list_show_test"></label>
                        </div>
                        <div class="form-group">
                            <label><font color="#5B00AE">实际的响应字段列表：</font></label>
                            <label id="actual_field_name_list_show_test"></label>
                        </div>
                        <div class="form-group">
                            <label><font color="#5B00AE">响应字段列表比较结果：</font></label>
                            <label id="result_field_name_list_show_test"></label>
                        </div>
                        <hr />
                        <div class="form-group">
                            <label><font color="#5B00AE">测试结果：</font></label>
                            <label id="test_result_show_test"></label>
                        </div>
                        <hr />
                        <div class="form-group">
                            <label>更新时间：</label>
                            <label id="update_time_show_test"></label>
                        </div>
                        <div class="form-group">
                            <label>创建时间：</label>
                            <label id="create_time_show_test"></label>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span>关闭</button>
                    </div>
                </div>
            </div>
        </div>

        <script src="/{{nginx_api_proxy}}/static/scripts/jquery.min.js" type="text/javascript"></script>
        <script src="/{{nginx_api_proxy}}/static/scripts/bootstrap.min.js" type="text/javascript"></script>
        <script src="/{{nginx_api_proxy}}/static/scripts/common.js" type="text/javascript"></script>
        <script src="/{{nginx_api_proxy}}/static/scripts/project.js" type="text/javascript"></script>
        <script src="/{{nginx_api_proxy}}/static/scripts/sweetalert.min.js" type="text/javascript"></script>
        <script src="/{{nginx_api_proxy}}/static/scripts/jquery.dataTables.js" type="text/javascript"></script>
        <script src="/{{nginx_api_proxy}}/static/scripts/dataTables.bootstrap.js" type="text/javascript"></script>

        <!-- 激活 气泡弹层 -->
        <script type="text/JavaScript">
            $(function (){
                $("[data-toggle='popover']").popover();
            });
        </script>

        <!--若当前有用例在运行，则实时更新进度信息-->
        <script language="javascript" type="text/javascript">
            $(document).ready(function () {
                if('{{is_run}}' == 'True'){
                    background_polling('{{pro_name}}', '{{nginx_api_proxy}}');
                }
            });
        </script>

    </body>
</html>
